---
title: "How to?"
author: "Jiddu Alexander"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = FALSE
)
```

# Authenticate

First get an authentication token using labguru_authenticate.

```{r}
labguru_authenticate(email    = "my@@email.com",
                     password = "mypassword",
                     server   = "https://jonathan.labguru.com",
                     set_sys  = TRUE)
```

With set_sys = TRUE your system variables LABGURU_SERVER and LABGURU_TOKEN are automatically set and can be picked up by future function calls conencting to the Labguru API. Check these variables using labguru_sys_variables()

```{r}
labguru_sys_variables()
```

# Upload data to Labguru

You can now upload a dataset to Labguru using labguru_upload_dataset. There is sample data you can load from the package.

```{r}
data("compensation")
compensation
```

```{r}
up_0 <- labguru_upload_dataset(dataset     = compensation,
                               name        = "compensation")
up_0
```



Upload a R script

```{r}
up_1 <- labguru_upload_file(file  = "../data-raw/sample_upload_script.R", 
                            title = "My R script")
```


Upload an image

```{r}
up_2 <- labguru_upload_file(file  = "../data-raw/grazing.png", 
                            title = paste("grazing", Sys.time()))
up_2
```

Attach uploaded file to a database

```{r}
up_3 <- labguru_link_visualization(dataset_id = 61,
                                   attachment_id = up_2$id,
                                   name = "my_link")
up_3
```

Upload image with immediate link to database

```{r}
up_4 <- labguru_upload_visualization(file  = "../data-raw/grazing.png", 
                                     title = paste("grazing_again", Sys.time()),
                                     dataset_id = 61,
                                     name = "my_second_link")
up_4
```